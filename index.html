<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>A2KDA Aurora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <div class="aurora-glow"></div>

    <header>
      <div class="title-block">
        <h1>A2KDA Aurora</h1>
        <p>See at-a-glance if thereâ€™s a realistic chance of aurora from where you are.</p>
      </div>
      <div class="pill">
        <span class="pill-dot"></span>
        <span>Live location &amp; sky brightness</span>
      </div>
    </header>

    <!-- LOCATION CARD -->
    <section class="card" id="location-card">
      <div class="card-header">
        <div>
          <div class="card-title">Location</div>
          <div class="card-subtitle">
            Used to estimate both aurora visibility and light pollution.
          </div>
        </div>
      </div>

      <div class="location-main" id="location-main">
        Working out where you areâ€¦
      </div>
      <div class="location-detail" id="location-detail">
        Trying your deviceâ€™s GPS first, then falling back to an approximate IP-based lookup.
      </div>
      <div class="location-meta" id="location-meta">
        <span class="meta-pill" id="location-source-pill">Source: detectingâ€¦</span>
      </div>

      <div class="search-row">
        <input
          type="text"
          id="search-input"
          placeholder="Search placeâ€¦"
          autocomplete="off"
        />
        <button class="btn" id="search-button">Search</button>
        <button class="btn btn-primary" id="gps-button">Use device GPS / IP</button>
      </div>

      <div
        class="lp-badge lp-badge-unknown"
        data-role="light-pollution-badge"
        title="Light pollution estimate will update once we have a location."
      >
        <div class="lp-indicator">
          <div class="lp-indicator-inner" style="height: 50%;"></div>
        </div>
        <span class="lp-badge-label-strong">Light pollution:</span>
        <span class="lp-badge-label">estimatingâ€¦</span>
      </div>

      <div class="lp-mode-controls">
        <div class="lp-mode-label">Sky brightness</div>
        <div class="lp-mode-options" id="lp-mode-options">
          <button class="lp-mode-btn lp-mode-btn-active" data-mode="auto">Auto</button>
          <button class="lp-mode-btn" data-mode="dark">Dark rural</button>
          <button class="lp-mode-btn" data-mode="suburban">Suburban</button>
          <button class="lp-mode-btn" data-mode="urban">Bright city</button>
        </div>
        <div class="lp-mode-hint" id="lp-mode-hint">
          Auto is a rough guess from your location. Adjust if you know your local sky.
        </div>
      </div>
    </section>

    <!-- DATA STATUS BANNER -->
    <section class="status-banner card" id="status-banner">
      <div class="status-banner-title">Data status:</div>
      <ul>
        <li>Light pollution <strong>is included</strong> using a simple model based on location and place type, with an optional manual override.</li>
        <li>Moon altitude, detailed darkness and cloud data are still placeholders and not yet used in the main score.</li>
        <li>Your approximate location may be estimated from your internet connection if device GPS is not available; as a last resort we fall back to the Isle of RÃ¹m.</li>
      </ul>
    </section>

    <!-- KP + VERDICT -->
    <section class="grid-two">
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Aurora activity (KP)</div>
            <div class="card-subtitle">
              For now you can tweak KP manually to explore â€œwhat if?â€ scenarios.
            </div>
          </div>
        </div>

        <div class="slider-row">
          <label for="kp-input">KP</label>
          <input type="range" id="kp-input" min="0" max="9" step="0.1" value="3.5" />
          <span class="kp-value" id="kp-value">KP 3.5</span>
        </div>
        <div class="hint">
          In the full app this will be driven by live space weather data (e.g. NOAA SWPC forecasts).
        </div>
      </section>

      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Aurora visibility from here</div>
            <div class="card-subtitle">
              Takes into account KP, your distance from the auroral oval, sky brightness, and local time.
            </div>
          </div>
        </div>

        <div class="verdict" data-role="aurora-verdict" data-state="">
          <div class="verdict-main">
            <div class="verdict-text" id="verdict-text">
              Waiting for enough info to score your chancesâ€¦
            </div>
            <div class="verdict-score" id="verdict-score">
              Score â€” / 100
            </div>
          </div>
          <ul class="debug-list" data-role="aurora-debug">
            <li>Weâ€™ll start as soon as we have a location and a KP value.</li>
          </ul>
        </div>
      </section>
    </section>

    <!-- TONIGHT SUMMARY -->
    <section class="card">
      <div class="tonight-title" id="tonight-title">Tonight at your location</div>
      <div class="tonight-location" id="tonight-location-sub">Summary based on todayâ€™s conditions.</div>

      <div class="tonight-chance chance-low" id="tonight-chance">
        Low chance
      </div>
      <div class="tonight-direction" id="tonight-direction">
        Look North or Northâ€“Northwest.
      </div>
      <div class="tonight-geomag" id="tonight-geomag">
        Geomagnetic activity looks low; cloud and moonlight estimates are still placeholders.
      </div>

      <div class="chip-row">
        <div class="chip">
          <span class="chip-label">Aurora activity: </span>
          <span class="chip-value" id="chip-aurora">Low</span>
        </div>
        <div class="chip">
          <span class="chip-label">Clouds: </span>
          <span class="chip-value" id="chip-clouds">Mostly clear (placeholder 20%).</span>
        </div>
        <div class="chip">
          <span class="chip-label">Moon: </span>
          <span class="chip-value" id="chip-moon">Moon phase shown per hour; altitude integration coming soon.</span>
        </div>
        <div class="chip">
          <span class="chip-label">Darkness: </span>
          <span class="chip-value" id="chip-darkness">Sunset / sunrise times placeholder.</span>
        </div>
        <div class="chip">
          <span class="chip-label">Light pollution: </span>
          <span class="chip-value" id="chip-lightpollution">Included via a simple model, with manual override.</span>
        </div>
      </div>
    </section>

    <!-- NEXT DARK HOURS -->
    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Next dark hours</div>
          <div class="card-subtitle">
            Prototype bar chart â€“ viewing chance, cloud cover and moon phase will plug in here.
          </div>
        </div>
      </div>

      <div class="hourly-bar" id="hourly-bar">
        <!-- Demo hours; these are static until we hook in hourly data -->
        <div class="hour-block">
          <div class="hour-block-time">16:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 70%;"></div>
          </div>
          <div class="hour-block-meta">61% â˜ï¸ Â· ğŸŒ–</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">17:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 55%;"></div>
          </div>
          <div class="hour-block-meta">31% â˜ï¸ Â· ğŸŒ–</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">18:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 60%;"></div>
          </div>
          <div class="hour-block-meta">39% â˜ï¸ Â· ğŸŒ–</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">19:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 85%;"></div>
          </div>
          <div class="hour-block-meta">12% â˜ï¸ Â· ğŸŒ—</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">20:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 95%;"></div>
          </div>
          <div class="hour-block-meta">2% â˜ï¸ Â· ğŸŒ—</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">21:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 100%;"></div>
          </div>
          <div class="hour-block-meta">0% â˜ï¸ Â· ğŸŒ—</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">22:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 92%;"></div>
          </div>
          <div class="hour-block-meta">4% â˜ï¸ Â· ğŸŒ˜</div>
        </div>
        <div class="hour-block">
          <div class="hour-block-time">23:00</div>
          <div class="hour-block-bar">
            <div class="hour-block-bar-inner" style="height: 80%;"></div>
          </div>
          <div class="hour-block-meta">9% â˜ï¸ Â· ğŸŒ˜</div>
        </div>
      </div>
    </section>

    <!-- DETAIL CARDS -->
    <section class="detail-grid">
      <div class="card">
        <div class="detail-heading">Aurora activity</div>
        <div class="detail-body" id="detail-aurora">
          KP and geomagnetic latitude combine into an overall activity level. This is currently driven by your chosen KP slider value.
        </div>
      </div>
      <div class="card">
        <div class="detail-heading">Clouds</div>
        <div class="detail-body" id="detail-clouds">
          Cloud cover will eventually be pulled from a weather API. For now we assume â€œmostly clear (20%)â€ as a placeholder for testing layouts.
        </div>
      </div>
      <div class="card">
        <div class="detail-heading">Moon</div>
        <div class="detail-body" id="detail-moon">
          Moon phase and altitude will affect how washed-out the sky is. The hourly strip above is a rough mock; detailed modelling to follow.
        </div>
      </div>
      <div class="card">
        <div class="detail-heading">Darkness</div>
        <div class="detail-body" id="detail-darkness">
          Civil, nautical and astronomical twilight, plus sunset/sunrise, will be used to define the â€œdark windowâ€. At the moment this panel is descriptive only.
        </div>
      </div>
      <div class="card">
        <div class="detail-heading">Light pollution</div>
        <div class="detail-body" id="detail-lightpollution">
          We estimate light pollution from your latitude/longitude and the type of place (big city vs remote nature). You can override this using the sky brightness control above.
        </div>
      </div>
    </section>

    <!-- TIP -->
    <section class="card">
      <div class="tip">
        <strong>Tip:</strong> Give your eyes 20â€“30 minutes to adjust to the dark and avoid bright white
        screens while watching for aurora.
      </div>
    </section>

    <div class="footer">
      <span id="footer-time"></span>
      <span>Light pollution is currently estimated with a simple model, with a manual sky brightness override. You can plug in a real data source later.</span>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
